@page "/editEmployee/{id:int}"
@inject GetData data
@inject NavigationManager navigate
@using BlazorEmployee.Modals


<HeaderBackComponent IsBackAble="IsBackAble" ButtonTitle="Back">Edit Employee</HeaderBackComponent>
<FormComponent Data="Employee" Invalid="Invalid" Submit="HandleEdit" ButtonTitle="Submit" IsDisabled="false"></FormComponent>

@code {
    [Parameter]
    public int Id { get; set; }

    public bool IsBackAble { get; set; } = true;

    public Employee? Employee { get; set; } = new Employee();

    protected override void OnInitialized()
    {
        List<Employee> CloneEmployees = new List<Employee>(data.Employees);
        Employee = CloneEmployees.Find(p => p.ID == Id);
    }

    public void HandleEdit(Employee employee)
    {
        data.UpdateEmployee(employee);
        navigate.NavigateTo("/");
    }

    public void Invalid()
    {
        IsBackAble = !IsBackAble;
    }
}
