@page "/"


<h1>Hello, world!</h1>

<JobContainer Jobs="Jobs" OnStatusUpdated="HandleStatusUpdated">
    <JobList ListStatus="JobStatuses.Todo" AllowdStatuses="@(new JobStatuses[] {JobStatuses.Started})"></JobList>
    <JobList ListStatus="JobStatuses.Started" AllowdStatuses="@(new JobStatuses[] {JobStatuses.Todo})"></JobList>
    <JobList ListStatus="JobStatuses.Completed" AllowdStatuses="@(new JobStatuses[] {JobStatuses.Started})"></JobList>
</JobContainer>

<hr />
<p>Last Updated Job <strong>@lastUpdatedJob</strong></p>
<hr />

@foreach (var task in Jobs)
{
    <p>@task.Detail - <strong>@task.Status</strong></p>
}

@code{
    List<JobModel> Jobs = new List<JobModel>();
    string lastUpdatedJob = "";

    protected override void OnInitialized()
    {
        for (int i =1; i<=5; i++)
        {
            Jobs.Add(new JobModel
                {
                    Id = i,
                    Detail = "Job " + i,
                    Status = JobStatuses.Todo,
                    UpdatedTime = DateTime.Now
                });
        }
    }

    void HandleStatusUpdated(JobModel updatedJob)
    {
        lastUpdatedJob = updatedJob.Detail;
    }


}
